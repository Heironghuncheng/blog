# 全局配置
{
    # 可选：设置管理员邮箱（用于SSL证书申请）
    # email blessingbrandro@gmail.com
    # 可选：设置ACME CA（证书颁发机构）
    # acme_ca https://acme-v02.api.letsencrypt.org/directory
}

# blog.blessing.website - 反向代理到Hugo本地服务器
blog.blessing.website {
    # 设置根目录（如果需要服务静态文件）
    root * /srv/public

    file_server
    
}

# file.blessing.website - 文件服务器
file.blessing.website {
    # 设置根目录
    root * /srv/files
    
    # 启用文件浏览功能
    file_server browse
    
}

slide.blessing.website {
  root * /srv/slidevs
  encode zstd gzip
  file_server browse

  # 先尝试真实文件或目录下的 index.html
  try_files {path} {path}/index.html /index.html

  # 每个子目录的深链接，回退到该目录的 index.html
  @spa {
    not file
    path_regexp deck ^/([^/]+)/.*
  }
  rewrite @spa /{re.deck.1}/index.html
}

# blessing.website - 重定向到blog子域名
#blessing.website, www.blessing.website {
    # 永久重定向到blog子域名
    #redir https://blog.blessing.website{uri} permanent
    
#}
